"use strict";angular.module("me",["ngAnimate","ngResource","ngRoute","ngSanitize"]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"templates/about.html",title:"About Me"}).when("/unprofessional",{templateUrl:"templates/unprofessional.html",title:"Unprofessional"}).when("/blog-posts",{templateUrl:"templates/blog-posts.html",title:"Blog Posts"}).when("/blog-posts/user-experience",{templateUrl:"templates/posts/user-experience.html",controller:"PostController",resolve:{post:["$post",function(a){return a.get({title:"User Experience"})}]},title:"Blog Posts"}).when("/projects",{templateUrl:"templates/projects.html",title:"Projects"}).when("/professional",{templateUrl:"templates/professional.html",title:"Professional"}).otherwise({redirectTo:"/about"})}]).run(["$rootScope",function(a){a.$on("$routeChangeSuccess",function(b,c){a.title=c.title?c.title:void 0}),angular.element.prototype.getDomElement=function(){return this[0]},angular.element.prototype.isEmpty=function(){for(var a in this)if(this.hasOwnProperty(a))return!1;return!0},angular.element.prototype.previous=function(){return angular.element(this.prop("previousElementSibling"))},Array.prototype.first=function(){return this[0]}}]),angular.module("me").animation(".collapse",["$animate",function(a){return{beforeEnter:function(a,b){a.css("margin-top","-"+a.prop("clientHeight")+"px"),b()},enter:function(b,c){a.animate(b,{"margin-top":"-"+b.prop("clientHeight")+"px"},{"margin-top":"0"}).then(c)},leave:function(b,c){a.animate(b,{"margin-top":"0"},{"margin-top":"-"+b.prop("clientHeight")+"px"}).then(c)}}}]),angular.module("me").controller("LeftDrawerController",["$drawer","$scope","$timeout",function(a,b,c){var d;a.get("left").then(function(a){d=a,b.$on("$routeChangeSuccess",function(){c(d.close,150)})})}]),angular.module("me").controller("PostController",["post","$scope",function(a,b){a.$promise.then(function(a){b.compose={},b.post=a}),b.postComment=function(){var a={author:b.compose.author||"Anonymous",body:b.compose.body,email:b.compose.email};b.post.comments.push(a),b.post.$save(function(a){console.log(a)})}}]),angular.module("me").controller("ResumeController",["$dialog","$scope",function(a,b){b.showResume=function(){a.show({clickOutsideToClose:!0,templateUrl:"templates/dialogs/resume-dialog.html"})}}]),angular.module("me").controller("RightDrawerController",["$drawer","$media","$scope","$timeout",function(a,b,c,d){var e,f=b("lt-sm");c.showToolbar=f.matches,f.addListener(function(a){d(function(){c.showToolbar=a.matches},350)}),a.get("right").then(function(a){e=a}),c.closeDrawer=function(){d(e.close,300)}}]),angular.module("me").controller("ToolbarController",["$drawer","$scope","$timeout",function(a,b,c){var d,e;a.get("left").then(function(a){d=a}),a.get("right").then(function(a){e=a}),b.toggleLeftDrawer=function(){c(d.toggle,300)},b.toggleRightDrawer=function(){c(e.toggle,300)}}]),angular.module("me").directive("drawer",["$animate","$backdrop","$drawer","$media","$q",function(a,b,c,d,e){return{link:function(f,g,h){function i(){"left"===h.id?o.prepend(g):p.after(g)}function j(){r||(g.addClass("locked").removeClass("unlocked"),q?b.leave().then(b.off("click"))["finally"](f.$apply()):(i(),a.setClass(g,"open","close")["finally"](f.$apply())),r=!0)}function k(){r&&(q?(g.addClass("unlocked").removeClass("locked"),b.enter().then(b.on("click",l))["finally"](f.$apply())):a.setClass(g,"close","open").then(function(){g.detach().addClass("unlocked").removeClass("locked")})["finally"](f.$apply()),r=!1)}function l(){q&&!r&&(e.all([a.setClass(g,"close","open"),b.leave()]).then(function(){g.detach(),b.off("click")})["finally"](f.$apply()),q=!1)}function m(){q||(i(),a.setClass(g,"open","close"),b.enter().then(function(){b.on("click",l)}),q=!0)}function n(){q?l():m()}var o=g.parent(),p=g.previous(),q=!1,r=!1;if(h.lockOpen){var s=d(h.lockOpen);s.matches?(g.addClass("locked open"),r=!0):g.detach().addClass("unlocked close"),s.addListener(function(a){a.matches?j():k()})}else g.detach().addClass("unlocked close");c.register(h.id,{close:l,open:m,toggle:n})}}}]),angular.module("me").directive("flex",function(){return{link:function(a,b,c){var d=c.grow?c.grow:0,e=c.shrink?c.shrink:0,f=c.basis?c.basis:"auto";b.css({"-webkit-flex":d+" "+e+" "+f,"-ms-flex":d+" "+e+" "+f,flex:d+" "+e+" "+f}),c.alignSelf&&b.css({"-ms-flex-item-align":c.alignSelf,"-webkit-align-self":c.alignSelf,"align-self":c.alignSelf}),c.order&&b.css({"-ms-flex-order":c.order,"-webkit-order":c.order,order:c.order})}}}),angular.module("me").directive("gravatar",["$md5",function(a){return{restrict:"A",link:function(b,c,d){d.email?a(d.email).success(function(a){c.attr("src","http://www.gravatar.com/avatar/"+a+"?s=60&d=404")}):c.attr("src",d.fallback),c.on("error",function(){c.attr("src",d.fallback)})}}}]),angular.module("me").directive("inputContainer",["$window",function(a){return{scope:!0,link:function(b,c){function d(){var a=h.getDomElement(),b=f.paddingTop.slice(0,-2),c=f.paddingBottom.slice(0,-2);a.style.height="20px";var d=a.scrollHeight-b-c;a.style.height=d+"px"}function e(){h.on("input",d),a.addEventListener("resize",d)}var f,g=c.find("label").addClass("disable"),h=c.find("input");if(h.isEmpty()){if(h=c.find("textarea"),h.isEmpty())return;f=a.getComputedStyle(h[0]),e()}h.ready(function(){h.prop("value")?(c.addClass("has-value"),g.one("transitionend",function(){g.removeClass("disable")})):g.removeClass("disable"),"TEXTAREA"===h.prop("nodeName")&&d()}),c.on("click",function(a){a.stopPropagation()}),g.on("click",function(a){a.stopImmediatePropagation(),h[0].focus()}),h.on("focus",function(){c.addClass("active")}),h.on("blur",function(){this.value?c.addClass("has-value"):c.removeClass("has-value"),c.removeClass("active")})}}}]),angular.module("me").directive("marked",["$marked","$sanitize",function(a,b){function c(a){a.className&&Prism.highlightElement(a,!1,null)}return{link:function(d,e,f){f.marked&&e.html(b(a(f.marked))),e.ready(function(){e.find("a").attr("no-ink","").attr("target","_blank"),angular.forEach(e.find("code"),c)})}}}]),angular.module("me").directive("mediaPlayer",["$album","$audio",function(a,b){return{templateUrl:"templates/components/media-player.html",link:function(c,d,e){function f(){m.one("animationiteration webkitAnimationIteration",function(){c.loading=void 0,c.$apply()})}function g(){c.duration=b.duration(),c.$apply()}function h(){c.currentTime=0,c.duration=0,c.loading=!0,c.$apply()}function i(){c.$apply()}function j(){m.one("animationiteration webkitAnimationIteration",function(){c.loading=void 0,c.$apply()})}function k(){c.currentTime=b.currentTime(),c.$apply()}function l(){b.off("canplaythrough",f),b.off("durationchange",g),b.off("loadstart",h),b.off("progress",i),b.off("suspend",j),b.off("timeupdate",k)}var m=d.find("progress-linear"),n=d.find("scroll"),o=n.previous();c.audio=b,n.on("scroll",function(){n.prop("scrollTop")<=0?o.removeClass("elevated"):o.addClass("elevated")}),a(e.collectionId).then(function(a){c.album=a,b.isSet()?(c.duration=b.duration(),c.currentTime=b.currentTime()):(b.set(c.album.currentTrack().title),b.on("ended",function(){a.hasNextTrack()&&(b.set(a.nextTrack().title),b.play())})),b.on("canplaythrough",f),b.on("durationchange",g),b.on("loadstart",h),b.on("progress",i),b.on("suspend",j),b.on("timeupdate",k);var d=m.hasOwnProperty("ontouchstart")?"touchstart":"mousedown";m.on(d,function(a){b.setCurrentTime(a.offsetX*(m.attr("max")/m.prop("clientWidth")))})}),c.$on("$destroy",l)},controller:["$scope",function(a){a.selectTrack=function(c,d){a.album.selectTrack(d),b.set(c.title),b.play()},a.selectNext=function(){var c=b.isPlaying();b.set(a.album.nextTrack().title),c&&b.play()},a.selectPrevious=function(){var c=b.isPlaying();b.set(a.album.previousTrack().title),c&&b.play()},a.toggleRepeat=function(){b.repeatEnabled()?b.repeatOff():b.repeatOn()},a.toggleShuffle=function(){a.album.isShuffled()?a.album.unShuffle():a.album.shuffle()}}]}}]).filter("zeroPad",function(){return function(a){return 10>a?"0"+a:a}}).filter("playBack",["$filter",function(a){return function(b){var c=Math.floor(b/60),d=a("zeroPad")(Math.floor(b%60));return c+":"+d}}]),angular.module("me").directive("ngView",function(){return{controller:["$element","$scope","$scroll",function(a,b,c){b.$on("$routeChangeStart",function(b,d,e){c.remember(e.$$route.title,a.parent().prop("scrollTop"))}),b.$on("$routeChangeSuccess",function(b,d){a.ready(function(){a.parent().prop("scrollTop",c.position(d.$$route.title))})})}]}}),angular.module("me").directive("progressLinear",function(){return{template:"<bar></bar><bar></bar>",link:function(a,b,c){function d(a,d){c.max>0?b.css("clip","rect(0, "+d*(c.buffered/c.max)+"px, "+a+"px, 0)"):b.css("clip","rect(0, 0, "+a+"px, 0)")}var e=b.find("bar").eq(0);c.$observe("buffered",function(){c.indeterminate||d(b.prop("clientHeight"),b.prop("clientWidth"))}),c.$observe("value",function(){c.max>0?e.css("width",c.value/c.max*100+"%"):e.css("width","0%")}),c.$observe("indeterminate",function(){var a=b.prop("clientHeight"),e=b.prop("clientWidth");c.indeterminate?b.css("clip","rect(0, "+e+"px, "+a+"px, 0)"):c.buffered&&d(a,e)})}}}),angular.module("me").directive("ripple",["$animate",function(a){return{link:function(b,c,d){function e(a){var b=angular.element("<ink></ink>"),e=c.getDomElement().getBoundingClientRect(),f=Math.max(e.height,e.width);return b.css({height:f+"px",width:f+"px",top:a.pageY-e.top-f/2+"px",left:a.pageX-e.left-f/2+"px","background-color":d.inkColor||g.color}),b}function f(d){a.enter(d,c).then(function(){d.remove()})["finally"](b.$apply())}c.css({position:"relative",overflow:"hidden"});var g=window.getComputedStyle(c.getDomElement());if(c.getDomElement().hasOwnProperty("ontouchstart")){var h;c.on("touchstart",function(a){h=!1;var b=e(a);setTimeout(function(){h||f(b)},100)}),c.on("touchmove",function(){h=!0})}else c.on("mousedown",function(a){f(e(a))})}}}]).directive("scroll",function(){return{link:function(a,b){b.on("touchstart",angular.noop)}}}).directive("button",["rippleDirective",function(a){var b=a.first();return{link:function(a,c,d){void 0===d.noInk&&b.link.apply(b,arguments)}}}]).directive("a",["rippleDirective",function(a){var b=a.first();return{link:function(a,c,d){void 0===d.noInk&&c.hasClass("button")&&b.link.apply(b,arguments)}}}]).directive("tab",["rippleDirective",function(a){var b=a.first();return{link:function(a,c,d){void 0===d.noInk&&b.link.apply(b,arguments)}}}]),angular.module("me").directive("tabs",["$media","$templateCache","$timeout","$window",function(a,b,c,d){return{transclude:!0,template:'<tab-container ng-transclude></tab-container><div class="tab-view" ng-if="template" ng-include="template"></div>',link:function(e,f,g){function h(a){a=a||g.active,l.css({left:k[a].offsetLeft+"px",width:k[a].clientWidth+"px"})}function i(a){c(function(){e.template=k[a].template,e.template?f.addClass("round-bottom"):f.removeClass("round-bottom"),h(a)})}function j(){m.matches?k.css("width",100/k.length+"%"):k.css("width",""),h()}var k=f.find("tab"),l=angular.element("<indicator></indicator>"),m=a("lt-sm");f.find("tab-container").append(l),angular.forEach(k,function(a,c){a.innerHTML&&(a.template=a.attributes.label.value.toLowerCase()+".html",b.put(a.template,a.innerHTML)),a.tabIndex=c,a.innerHTML=a.attributes.label.value}),g.active||g.$set("active",0),m.matches&&j(),k.on("click",function(){l.addClass("animate"),g.$set("active",this.tabIndex)}),l.on("transitionend webkitTransitionEnd",function(){l.removeClass("animate")}),g.$observe("active",i),a("lt-sm").addListener(j),d.addEventListener("resize",function(){h()})}}}]),angular.module("me").filter("age",["$filter",function(a){function b(a,b){var c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()),d=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes());return(d-c)/6e4}var c=new Date;return function(d){var e=b(new Date(d),c);if(1>e)return"just now";if(60>e)return e=Math.floor(e),e>1?e+" minutes ago":e+" minute ago";if(1440>e){var f=Math.floor(e/60);return f>1?f+" hours ago":f+" hour ago"}if(43829>e){var g=Math.floor(e/1440);return g>1?g+" days ago":g+" day ago"}return"commented on "+a("date")(d)}}]),angular.module("me").factory("$album",["$http","$q",function(a,b){function c(a,b){this.artist=a.artistName,this.artworkUrl=a.artworkUrl60.replace("60x60-50","600x600"),this.release=a.releaseDate.split("-").first(),this.title=a.collectionName,this.trackCount=b.length,this.tracks=[],this._current=0,b.forEach(function(a){this.tracks.push({duration:a.trackTimeMillis/1e3,number:a.trackNumber,title:a.trackName})},this)}var d=[];return c.prototype.currentTrack=function(){return this.tracks[this._current]},c.prototype.hasNextTrack=function(){return this._current<this.trackCount-1},c.prototype.hasPreviousTrack=function(){return this._current>0},c.prototype.isShuffled=function(){var a=0;return this.tracks.some(function(b){return b.number!==++a})},c.prototype.nextTrack=function(){return this.hasNextTrack()?this.tracks[++this._current]:null},c.prototype.previousTrack=function(){return this.hasPreviousTrack()?this.tracks[--this._current]:null},c.prototype.selectTrack=function(a){this._current=a},c.prototype.shuffle=function(){for(var a,b,c=this.tracks.length,d=this.tracks[this._current];c;)a=Math.floor(Math.random()*c--),b=this.tracks[c],this.tracks[c]=this.tracks[a],this.tracks[a]=b;this._current=this.tracks.indexOf(d)},c.prototype.unShuffle=function(){this._current=this.tracks[this._current].number-1,this.tracks.sort(function(a,b){return a.number-b.number})},function(e){var f=b.defer();if(d.hasOwnProperty(e))f.resolve(d[e]);else{var g=JSON.parse(localStorage.getItem(e));g?(d[e]=new c(g.results.shift(),g.results.slice(0,12)),f.resolve(d[e])):a.jsonp("https://itunes.apple.com/lookup",{params:{callback:"JSON_CALLBACK",id:e,country:"us",entity:"song"}}).success(function(a){localStorage.setItem(e,JSON.stringify(a)),d[e]=new c(a.results.shift(),a.results.slice(0,12)),f.resolve(d[e])})}return f.promise}}]),angular.module("me").factory("$audio",function(){var a;return{buffered:function(){return this.isSet()&&a.buffered.length?Math.floor(a.buffered.end(a.buffered.length-1)):0},currentTime:function(){return this.isSet()?Math.floor(a.currentTime):0},duration:function(){return this.isSet()&&!isNaN(a.duration)?Math.floor(a.duration):0},isPlaying:function(){return this.isSet()?!a.paused:!1},isSet:function(){return a?!0:!1},off:function(b,c){this.isSet()&&a.removeEventListener(b,c)},on:function(b,c){this.isSet()&&a.addEventListener(b,c)},play:function(){this.isSet()&&a.play()},pause:function(){this.isSet()&&a.pause()},repeatEnabled:function(){return a?a.hasAttribute("loop"):!1},repeatOff:function(){a&&a.removeAttribute("loop")},repeatOn:function(){a&&a.setAttribute("loop","")},set:function(b){a?(a.src="media/The World from the Side of the Moon/"+b+".m4a",a.load()):a=new Audio("media/The World from the Side of the Moon/"+b+".m4a")},setCurrentTime:function(b){a&&(a.currentTime=b)}}}),angular.module("me").factory("$backdrop",["$animate",function(a){var b=angular.element("<backdrop></backdrop>");return{enter:function(){var c=a.enter(b,document.body);return c.then(function(){b.getDomElement().hasOwnProperty("ontouchmove")&&b.on("touchmove",function(a){a.preventDefault()})}),c},leave:function(){return a.leave(b)},off:function(a){b.off(a)},on:function(a,c){b.on(a,c)},one:function(a,c){b.one(a,c)}}}]),angular.module("me").factory("$dialog",["$animate","$backdrop","$compile","$controller","$http","$q","$rootScope","$templateCache",function(a,b,c,d,e,f,g,h){function i(a){return"object"==typeof a&&a.template?f.when(a.template):"object"==typeof a&&a.templateUrl?e.get(a.templateUrl,{cache:h}).then(function(a){return a.data}):f.when()}var j,k,l={};return l.hide=function(){b.leave(),a.leave(j).then(function(){k&&k.$destroy()})},l.show=function(e){var h=f.defer(),m={promise:h.promise};return i(e).then(function(f){m.reject=function(a){h.reject(a),l.hide()},m.resolve=function(a){h.resolve(a),l.hide()},k=g.$new(),k.hide=l.hide,"object"==typeof e&&e.controller&&d(e.controller,{$scope:k,$dialog:m}),j=c(angular.element("<dialog-container></dialog-container>").html(f))(k),b.enter(),a.enter(j,document.body).then(function(){"object"==typeof e&&e.clickOutsideToClose&&(j.children().eq(0).on("click",function(a){a.stopImmediatePropagation()}),j.on("click",function(){g.$apply(function(){m.resolve("User clicked outside to close")})}))})})["catch"](function(a){throw h.reject(a),new Error("Your dialog template appears to be missing.")}),m},l}]),angular.module("me").factory("$drawer",["$q",function(a){var b={},c={};return{get:function(d){return c.hasOwnProperty(d)?c[d].promise:(c[d]=a.defer(),b.hasOwnProperty(d)&&c[d].resolve(b[d]),c[d].promise)},register:function(a,d){b[a]=d,c.hasOwnProperty(a)&&c[a].resolve(b[a])}}}]),angular.module("me").provider("$marked",function(){this.config=function(a){this.options=a},this.$get=["$window",function(a){var b=a.marked;if(!b)throw new Error("Please include marked.js in your index.html.");return b.setOptions(this.options),b}]}),angular.module("me").factory("$md5",["$http",function(a){return function(b){return a({url:"http://localhost:3000/hash/"+b})}}]),angular.module("me").factory("$media",["$rootScope",function(a){function b(a){var b=window.matchMedia(a);f[a]={query:b,matches:b.matches}}function c(a){return e.hasOwnProperty(a)&&(a=e[a]),f.hasOwnProperty(a)||b(a),f[a].query}var d={"screen-sm":"600px","screen-md":"960px","screen-lg":"1200px"},e={"lt-sm":"(max-width: "+d["screen-sm"]+")","gt-sm":"(min-width: "+d["screen-sm"]+")","lt-md":"(max-width: "+d["screen-md"]+")","gt-md":"(min-width: "+d["screen-md"]+")","lt-lg":"(max-width: "+d["screen-lg"]+")","gt-lg":"(min-width: "+d["screen-lg"]+")"},f={};return c}]),angular.module("me").factory("$post",["$resource",function(a){return a("http://localhost:3000/post/:id:title",{id:"@_id",title:null})}]),angular.module("me").factory("$scroll",["$q",function(a){function b(b,c,d,e){function f(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function g(){l+=16,j=l/e,j=j>1?1:j,k=c+i*f(j),b.scrollTop=Math.floor(k),k===d&&(clearInterval(m),h.resolve("scroll complete"))}e=e||500;var h=a.defer(),i=d-c;if(0===i)return h.resolve("scroll complete");var j,k,l=0,m=setInterval(g,16);return h.promise}var c={};return{remember:function(a,b){c[a]=b},position:function(a){return c.hasOwnProperty(a)?c[a]:0},scroll:b}}]);